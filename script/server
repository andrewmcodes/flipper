#!/bin/bash
#/ Usage: server
#/
#/ Starts a server for perusing the UI locally.
#/
#/ Examples:
#/
#/   server
#/

set -e
cd $(dirname "$0")/..

[ "$1" = "--help" -o "$1" = "-h" -o "$1" = "help" ] && {
    grep '^#/' <"$0"| cut -c4-
    exit 0
}

# Activate mise if available so we use the correct ruby
if command -v mise &> /dev/null; then
  eval "$(mise activate bash)"
fi

PORT="${CONDUCTOR_PORT:-9999}"
script/bootstrap && bundle exec rackup examples/ui/basic.ru -p "$PORT"
